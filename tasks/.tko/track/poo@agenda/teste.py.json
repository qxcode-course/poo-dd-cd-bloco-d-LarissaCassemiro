{
    "patches": [
        {
            "label": "2025-12-03_21-34-09",
            "content": "@@ -1,266 +1,4 @@\n-%0A    # def rmFone(self, index: int):%0A    #     if index %3C 0 or index %3E= len(self.fones):%0A    #         raise Exception(f%22fail: indice invalido%22)%0A        %0A    #     del self.fones%5Bindex%5D%0A    #     self.fones = %7Bi: f for i, f in enumerate(self.fones.values())%7D%0A%0A%0A%0A\n clas\n",
            "lines": "340"
        },
        {
            "label": "2025-12-03_22-02-43",
            "content": "\n    # def rmFone(self, index: int):\n    #     if index < 0 or index >= len(self.fones):\n    #         raise Exception(f\"fail: indice invalido\")\n        \n    #     del self.fones[index]\n    #     self.fones = {i: f for i, f in enumerate(self.fones.values())}\n\n\n\nclass Phone:\n  def _init_(self, id: str, number: str):\n    self.__id: str = id\n    self.__number: str = number\n\n  def getId(self) -> str:\n    return self.__id\n  \n  def getNumber(self) -> str:\n    return self.__number\n  \n  def isValid(self) -> bool:\n    return True\n  \n  def _str_(self):\n    return f\"{self._id}:{self._number}\"\n\nclass Contact:\n  def _init_(self, name: str):\n    self.__name: str = name\n    self.__favorited: bool = False\n    self.__phones: list[Phone] = []\n\n  def addPhone(self, phone: Phone):\n    self.__phones.append(phone)\n\n  def rmPhone(self, index: int):\n    if 0 <= index < len(self.__phones):\n      self.__phones.pop(index)\n\n  def toggleFavorited(self):\n    self._favorited = not self._favorited\n\n  def isFavorited(self) -> bool:\n    return self.__favorited\n  \n  def getPhones(self):\n    return self.__phones\n  \n  def getName(self) -> str:\n    return self.__name\n  \n  def setName(self, name: str):\n    self.__name = name\n\n  def _str_(self):\n    phoneStrList = [str(phone) for phone in self.__phones]\n    return f\"{self.__name} [{\", \".join(phoneStrList)}]\"\n\nclass Agenda:\n  def _init_(self):\n    self.__contacts: list[Contact] = []\n\n  def getContacts(self) -> list[Contact]:\n    return sorted(self.__contacts, key=lambda contact: contact.getName())\n  \n  def findPosByName(self, name):\n    for i in range(len(self.__contacts)):\n      if self.__contacts[i].getName() == name:\n        return i\n    return -1\n  \n  def getContact(self, name: str) -> None:\n    index = self.findPosByName(name)\n    if index == -1:\n      return None\n    return self.__contacts[index]\n  \n  def addContact(self, name: str, phones: list[Phone]):\n    contactIndex = self.findPosByName(name)\n    if contactIndex != -1:\n      contact = self.__contacts[contactIndex]\n      for phone in phones:\n        contact.addPhone(phone)\n      return\n    \n    contact = Contact(name)\n    for phone in phones:\n      contact.addPhone(phone)\n    self.__contacts.append(contact)\n  \n  def rmContact(self, name: str):\n    index = self.findPosByName(name)\n    if index != -1:\n      self.__contacts.pop(index)\n\n  def search(self, pattern: str) -> list[Contact]:\n    result = []\n    for contact in self.getContacts():\n      if pattern in str(contact):\n        result.append(\"- \"+ str(contact))\n    return \"\\n\".join(result)\n  \n  def getFavorited(self) -> list[Contact]:\n    result = []\n    for contact in self.getContacts():\n      if contact.isFavorited():\n        result.append(contact)\n    return result\n  \n  def favoriteContact(self, name: str):\n    contact = self.getContact(name)\n    if contact is not None:\n      contact.toggleFavorited()\n\n  def _str_(self):\n    result = []\n    for contact in self.getContacts():\n      mark = \"@ \" if contact.isFavorited() else \"- \"\n      result.append(mark + str(contact))\n    return \"\\n\".join(result)\n  \ndef buildPhoneFromString(phoneStr: str) -> Phone:\n  id, number = phoneStr.split(\":\")\n  return Phone(id, number)\n\ndef main():\n  agenda = Agenda()\n\n  while True:\n    cmd = input()\n    args = cmd.split()\n    print(\"$\" + cmd)\n\n    if args[0] == \"add\":\n      name = args[1]\n      phones = []\n\n      for i in range(2, len(args)):\n        phone = buildPhoneFromString(args[i])\n        phones.append(phone)\n\n      agenda.addContact(name, phones)\n    elif args[0] == \"show\":\n      print(agenda)\n    elif args[0] == \"end\":\n      break\n    elif args[0] == \"rmFone\":\n      name = args[1]\n      index = int(args[2])\n      contact = agenda.getContact(name)\n      if contact:\n        contact.rmPhone(index)\n      agenda.rmContact(name)\n      agenda.addContact(contact.getName(), contact.getPhones())\n    elif args[0] == \"rm\":\n      name = args[1]\n      agenda.rmContact(name)\n    elif args[0] == \"search\":\n      pattern = args[1]\n      print(agenda.search(pattern))\n    elif args[0] == \"tfav\":\n      name = args[1]\n      agenda.favoriteContact(name)\n    elif args[0] == \"favs\":\n      favs = agenda.getFavorited()\n      print(\"\\n\".join(f\"@ {str(fav)}\" for fav in favs))\n    else:\n      print(\"fail: comando invalido\")\n\n\nif _name_ == \"_main_\":\n  main()\n\n\nclass Fone:\n    def _init_(self, id: str, number: str):\n        self.id = id\n        self.number = number \n        \n    def isValid(self):\n        validos = \"0123456789().-\"\n        for c in self.number:\n            if c not in validos:\n                return False \n        return True \n    \n    def getId(self):\n        return self.id \n    \n    def getNumber(self):\n        return self.number\n    \n    def toString(self):\n        return f\"{self.id}:{self.number}\"\n    \nclass Contact:\n    def _init_(self, name: str):\n        self.name = name \n        self.favorited = False\n        self.fones = []\n        \n    def addFone(self, id, number):\n        f = Fone(id, number)\n        if f.isValid():\n            self.fones.append(f)\n        else:\n            print(\"fail: invalid number\")\n            \n    def rmFone(self, index: int):\n        if 0 <= index < len(self.fones):\n            self.fones.pop(index)\n    \n    def toogleFavorited(self):\n        self.favorited = not self.favorited\n        \n    def isFavorited(self):\n        return self.favorited\n    \n    def getFones(self):\n        return self.fones\n\n    def getName(self):\n        return self.name\n\n    def setName(self, name: str):\n        self.name = name\n\n    def toString(self):\n        pref = \"@ \" if self.favorited else \"- \"\n        fones_str = \", \".join([f.toString() for f in self.fones])\n        return f\"{pref}{self.name} [{fones_str}]\"\n\n\n\nclass Agenda:\n    def _init_(self):\n        self.contacts = []\n\n    def findPosByName(self, name: str):\n        for i, c in enumerate(self.contacts):\n            if c.getName() == name:\n                return i\n        return -1\n\n    def addContact(self, name: str, fones):\n        pos = self.findPosByName(name)\n\n        \n        if pos != -1:\n            for f in fones:\n                if f.isValid():\n                    self.contacts[pos].getFones().append(f)\n            return\n\n        \n        c = Contact(name)\n        for f in fones:\n            if f.isValid():\n                c.getFones().append(f)\n\n        self.contacts.append(c)\n        self.contacts.sort(key=lambda x: x.getName())\n\n    def getContact(self, name: str):\n        pos = self.findPosByName(name)\n        if pos == -1:\n            return None\n        return self.contacts[pos]\n\n    def rmContact(self, name: str):\n        pos = self.findPosByName(name)\n        if pos != -1:\n            self.contacts.pop(pos)\n\n    def search(self, pattern: str):\n        result = []\n        for c in self.contacts:\n            if pattern in c.toString():\n                result.append(c)\n        return result\n\n    def getFavorited(self):\n        return [c for c in self.contacts if c.isFavorited()]\n\n    def getContacts(self):\n        return self.contacts\n\n    def toString(self):\n        return \"\\n\".join([c.toString() for c in self.contacts])\n\n\n\nagenda = Agenda()\n\nwhile True:\n    try:\n        line = input().strip()\n    except EOFError:\n        break\n\n    if line == \"\":\n        continue\n\n    print(\"$\" + line)\n    args = line.split()\n\n    cmd = args[0]\n\n    if cmd == \"end\":\n        break\n\n    elif cmd == \"add\":\n        name = args[1]\n        fones = []\n        for token in args[2:]:\n            id, number = token.split(\":\")\n            fones.append(Fone(id, number))\n        agenda.addContact(name, fones)\n\n    elif cmd == \"show\":\n        for c in agenda.getContacts():\n            print(c.toString())\n\n    elif cmd == \"rmFone\":\n        name = args[1]\n        index = int(args[2])\n        c = agenda.getContact(name)\n        if c:\n            c.rmFone(index)\n\n    elif cmd == \"rm\":\n        agenda.rmContact(args[1])\n\n    elif cmd == \"search\":\n        pattern = args[1]\n        r = agenda.search(pattern)\n        for c in r:\n            print(c.toString())\n\n    elif cmd == \"tfav\":\n        name = args[1]\n        c = agenda.getContact(name)\n        if c:\n            c.toogleFavorited()\n\n    elif cmd == \"favs\":\n        favs = agenda.getFavorited()\n        for c in favs:\n            print(c.toString())",
            "lines": "350"
        }
    ]
}